# ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏ß‡πá‡∏ö‡∏Ç‡∏∂‡πâ‡∏ô Server (VPS / aaPanel)

---

## üü¢ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô aaPanel (‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)
‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ aaPanel ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö:

1.  **‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ü‡∏•‡πå**:
    *   Upload ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏ó‡∏µ‡πà aaPanel (File Manager)
    *   **‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô** ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `node_modules` ‡πÅ‡∏•‡∏∞ `.next` (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏≠‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô)
    *   ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: `/www/wwwroot/razaan`

2.  **‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Node.js Project**:
    *   ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π **Website** -> **Node Project**
    *   ‡∏Å‡∏î **Add Node Project**

3.  **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)**:
    *   **Project Path**: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `/www/wwwroot/razaan`
    *   **Name**: ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ ‡πÄ‡∏ä‡πà‡∏ô `razaan`
    *   **Run Opt** (‡∏´‡∏£‡∏∑‡∏≠ Start Script): **‡πÄ‡∏•‡∏∑‡∏≠‡∏Å `start`**
        *(aaPanel ‡∏à‡∏∞‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå `package.json` ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å `start` ‡∏Ñ‡∏£‡∏±‡∏ö)*
    *   **Port**: ‡πÉ‡∏™‡πà `3000` (‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏≠‡∏∑‡πà‡∏ô‡∏ñ‡πâ‡∏≤‡∏ä‡∏ô)
    *   **Run User**: `www`

4.  **‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies**:
    *   ‡∏û‡∏≠‡∏Å‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡πâ install module **‡πÉ‡∏´‡πâ‡∏Å‡∏î Install** (‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏Å‡∏î `NPM Install` ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå)
    *   ‡∏£‡∏≠‡∏à‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à (‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `node_modules` ‡πÇ‡∏ú‡∏•‡πà‡∏°‡∏≤)

5.  **Build Project**:
    *   ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Node Project ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö **Script** ‡∏´‡∏£‡∏∑‡∏≠ **Command**
    *   ‡∏™‡∏±‡πà‡∏á‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á: `npm run build`
    *   *‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏ñ‡πâ‡∏≤‡∏´‡∏≤‡πÄ‡∏°‡∏ô‡∏π‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î Terminal ‡πÅ‡∏•‡πâ‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå `cd /www/wwwroot/razaan && npm run build`*

6.  **Restart**:
    *   ‡∏û‡∏≠‡∏ö‡∏¥‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏Å‡∏î **Restart** ‡∏ï‡∏±‡∏ß‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
    *   ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô **Running**

7.  **‡∏ï‡∏±‡πâ‡∏á Domain (Map Domain)**:
    *   ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π **Mapping** (‡∏´‡∏£‡∏∑‡∏≠ Domain) ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Node Project
    *   ‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏î‡πÄ‡∏°‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡πÄ‡∏ä‡πà‡∏ô `razaan.com`)
    *   ‡∏Å‡∏î Apply HTTPS (SSL) ‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥

---

## üü° ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô Ubuntu VPS (Manual via CLI)
*(‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ aaPanel ‡πÉ‡∏ä‡πâ SSH Command)*

1.  **‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Server**:
    *   OS: Ubuntu 22.04 LTS
    *   Access: `ssh root@your_ip`

2.  **‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°**:
    ```bash
    # Update & Install Node.js
    sudo apt update && sudo apt upgrade -y
    curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
    sudo apt install -y nodejs nginx

    # Install PM2
    sudo npm install -g pm2
    ```

3.  **‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ü‡∏•‡πå**:
    ```bash
    mkdir -p /var/www/razaan
    cd /var/www/razaan
    # Clone Git ‡∏´‡∏£‡∏∑‡∏≠ Upload file ‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
    ```

4.  **‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞ Build**:
    ```bash
    npm install
    npm run build
    ```

5.  **‡∏£‡∏±‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ PM2**:
    ```bash
    pm2 start npm --name "razaan" -- start
    pm2 save
    ```

6.  **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Nginx (Reverse Proxy)**:
    ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå config: `sudo nano /etc/nginx/sites-available/razaan`
    ```nginx
    server {
        listen 80;
        server_name your-domain.com;
        location / {
            proxy_pass http://localhost:3000;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection 'upgrade';
            proxy_set_header Host $host;
            proxy_cache_bypass $http_upgrade;
        }
    }
    ```
    Enable site:
    ```bash
    sudo ln -s /etc/nginx/sites-available/razaan /etc/nginx/sites-enabled/
    sudo systemctl restart nginx
    ```

---

## ‚öôÔ∏è ‡πÑ‡∏ü‡∏•‡πå .env (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å)
‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ aaPanel ‡∏´‡∏£‡∏∑‡∏≠ VPS ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env` ‡∏ö‡∏ô Server ‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏ï‡∏≤‡∏°‡∏ô‡∏µ‡πâ:

```env
MONGODB_URI=mongodb+srv://...
NEXT_PUBLIC_APP_URL=https://your-domain.com
LINE_CHANNEL_ACCESS_TOKEN=...
LINE_USER_ID=...
NEXT_PUBLIC_LIFF_ID=...
```
